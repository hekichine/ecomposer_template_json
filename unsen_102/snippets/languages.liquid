{%- liquid
    assign fl = ''
    assign current_locale = request.locale
    assign show_short_label = settings.show_short_label
    assign current_locale_iso_code = current_locale.iso_code -%}
    
{%- if linklists.languages-the4.links.size > 0 -%}
  {%- assign ck_iso_code = '#' | append: current_locale_iso_code -%}{%- assign links_cur = linklists.currency-the4.links | where: "url", ck_iso_code -%}
  <div data-locale-wrap class="t4s-top-bar__languages t4s-d-inline-block">
    <button data-dropdown-open data-position="bottom-end" data-id="dropdown_languages{{ sid }}"><span data-flagst4="{{ sz }}" data-current class="t4s-d-inline-block {{ fl }} lazyloadt4s flagst4-{{ current_locale_iso_code }}">{% if show_short_label %}{{ current_locale_iso_code | upcase }}{% else %}{{ links_cur.first.title | default: current_locale_iso_code }}{% endif %}</span><svg class="t4s-ion-select-arrow " role="presentation" viewBox="0 0 19 12"><polyline fill="none" stroke="currentColor" points="17 2 9.5 10 2 2" fill-rule="evenodd" stroke-width="2" stroke-linecap="square"></polyline></svg></button>
    <div data-dropdown-wrapper class="t4s-dropdown__wrapper t4s-current-scrollbar {{class_mb}}" id="dropdown_languages{{ sid }}">
       <div class="t4s-drop-arrow"></div>
       {%- for link_cur in linklists.languages-the4.links -%}{%- assign iso_code = link_cur.url | remove: '#' | remove: ' ' -%}
       <button type="button" data-flagst4="{{ sz }}" data-locale-item data-dropdown-off class="t4s-lang-item {{ fl }} lazyloadt4s flagst4-{{ iso_code }}{% if iso_code == current_locale_iso_code %} is--selected{% endif %}" data-iso="{{ iso_code }}">{% if show_short_label %}{{ iso_code | upcase }}{% else %}{{ link_cur.title }}{% endif %}</button>
       {%- endfor -%}
    </div>
  </div>
{%- else -%}
  <div data-locale-wrap class="t4s-top-bar__languages t4s-d-inline-block">
    <button data-dropdown-open data-position="bottom-end" data-id="dropdown_languages{{ sid }}"><span data-flagst4="{{ sz }}" data-current class="t4s-d-inline-block {{ fl }} lazyloadt4s flagst4-{{ current_locale_iso_code }}">{% if show_short_label %}{{ current_locale_iso_code | upcase }}{% else %}{{ current_locale.endonym_name }}{% endif %}</span><svg class="t4s-ion-select-arrow " role="presentation" viewBox="0 0 19 12"><polyline fill="none" stroke="currentColor" points="17 2 9.5 10 2 2" fill-rule="evenodd" stroke-width="2" stroke-linecap="square"></polyline></svg></button>
    <div data-dropdown-wrapper class="t4s-dropdown__wrapper t4s-current-scrollbar {{class_mb}}" id="dropdown_languages{{ sid }}">
       <div class="t4s-drop-arrow"></div>
       {%- for locale in shop.published_locales -%}{%- assign iso_code = locale.iso_code -%}
       <button type="button" data-flagst4="{{ sz }}" data-locale-item data-dropdown-off class="t4s-lang-item {{ fl }} lazyloadt4s flagst4-{{ iso_code }}{% if iso_code == current_locale_iso_code %} is--selected{% endif %}" data-iso="{{ iso_code }}">{% if show_short_label %}{{ iso_code | upcase }}{% else %}{{ locale.endonym_name }}{% endif %}</button>
       {%- endfor -%}
    </div>
  </div>
{%- endif -%}